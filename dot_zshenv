#!/usr/bin/env zsh

# This is only the essentials, use .zprofile for the rest. Also, Mac is dumb and sources /etc/zprofile after this file
# so you cannot set paths reliably here.

export ZDOTDIR="$HOME/.config/zsh"
[[ -d "$ZDOTDIR" ]] || mkdir -p "$ZDOTDIR" || {
  echo "Error: Failed to create dir: $ZDOTDIR" >&2
  return 1
}

# In WSL, set mise dirs to Linux paths EARLY before any mise activation
# This prevents mise from picking up Windows config/data via /mnt/c
if [[ -n "$WSL_DISTRO_NAME" ]] || grep -qiE "(microsoft|wsl)" /proc/version 2>/dev/null; then
  export MISE_DATA_DIR="$HOME/.local/share/mise"
  export MISE_CONFIG_DIR="$HOME/.config/mise"
  export MISE_CACHE_DIR="$HOME/.cache/mise"
  export MISE_STATE_DIR="$HOME/.local/state/mise"
  # Ignore Windows config paths - must be env var since mise reads configs before reading ignore settings
  export MISE_IGNORED_CONFIG_PATHS="/mnt/c:/mnt/d"
fi

# This is needed by Wezterm Multiplexer
export PATH="$HOME/.local/bin:$PATH"

# Enable 24-bit true color support for tools like delta, bat, etc.
# Warp doesn't set this automatically
export COLORTERM=truecolor

# -------------------------------------------------------------------------------------------------
# -*- mode: zsh; sh-indentation: 2; indent-tabs-mode: nil; sh-basic-offset: 2; -*-
# vim: ft=zsh sw=2 ts=2 et
# -------------------------------------------------------------------------------------------------
