#!/usr/bin/env bash

# This is NOT the typical brew.env mentioned in their docs, that file doesn't support shell expansion...
# This is sourced to make things work better as expected

HOMEBREW_PREFIX="${XDG_DATA_HOME:-$HOME/.local/share}/homebrew"
if [[ $(uname) == 'Darwin' ]]; then
  HOMEBREW_PREFIX="/opt/homebrew"
fi
export HOMEBREW_PREFIX="$HOMEBREW_PREFIX"

export HOMEBREW_CELLAR="$HOMEBREW_PREFIX/Cellar"
export HOMEBREW_REPOSITORY="$HOMEBREW_PREFIX"

export HOMEBREW_OPT="$HOMEBREW_PREFIX/opt"
export HOMEBREW_CACHE="${XDG_CACHE_HOME:-$HOME/.cache}/homebrew"
export HOMEBREW_BUNDLE_FILE="${DOTFILES:-$HOME/.config/dotfiles}/homebrew/dot-config/homebrew/Brewfile"
export HOMEBREW_BUNDLE_USER_CACHE="${XDG_CACHE_HOME:-$HOME/.cache}/homebrew"
export HOMEBREW_LOGS="${XDG_CACHE_HOME:-$HOME/.cache}/homebrew/logs"
export HOMEBREW_TEMP="${XDG_RUNTIME_DIR:-${TMPDIR:-/tmp}}/homebrew"

export PATH="$HOMEBREW_OPT/curl/bin:$PATH"
export PATH="$HOMEBREW_OPT/ruby/bin:$PATH"
export PATH="$HOMEBREW_OPT/jpeg/bin:$PATH"
export PATH="$HOMEBREW_OPT/krb5/bin:$PATH"
export PATH="$HOMEBREW_OPT/krb5/sbin:$PATH"
export PATH="$HOMEBREW_OPT/bison/bin:$PATH"
export PATH="$HOMEBREW_OPT/icu4c/bin:$PATH"
export PATH="$HOMEBREW_OPT/glibc/bin:$PATH"
export PATH="$HOMEBREW_OPT/icu4c/sbin:$PATH"
export PATH="$HOMEBREW_OPT/glibc/sbin:$PATH"
export PATH="$HOMEBREW_OPT/ncurses/bin:$PATH"
export PATH="$HOMEBREW_OPT/binutils/bin:$PATH"
export PATH="$HOMEBREW_OPT/libiconv/bin:$PATH"
export PATH="$HOMEBREW_OPT/libxml12/bin:$PATH"
export PATH="$HOMEBREW_OPT/openldap/bin:$PATH"
export PATH="$HOMEBREW_OPT/openldap/sbin:$PATH"
export PATH="$HOMEBREW_OPT/gnu-getopt/bin:$PATH"
export PATH="$HOMEBREW_OPT/make/libexec/gnubin:$PATH"
export PATH="$HOMEBREW_OPT/gawk/libexec/gnubin:$PATH"
export PATH="$HOMEBREW_OPT/grep/libexec/gnubin:$PATH"
export PATH="$HOMEBREW_OPT/gnu-sed/libexec/gnubin:$PATH"
export PATH="$HOMEBREW_OPT/gnu-tar/libexec/gnubin:$PATH"
export PATH="$HOMEBREW_OPT/gnu-which/libexec/gnubin:$PATH"
export PATH="$HOMEBREW_OPT/coreutils/libexec/gnubin:$PATH"
export PATH="$HOMEBREW_OPT/findutils/libexec/gnubin:$PATH"
export PATH="$HOMEBREW_PREFIX/bin:$HOMEBREW_PREFIX/sbin:$PATH"

export LIBRARY_PATH="$HOMEBREW_OPT/curl/lib:${LIBRARY_PATH:-}"
export LIBRARY_PATH="$HOMEBREW_OPT/krb5/lib:${LIBRARY_PATH:-}"
export LIBRARY_PATH="$HOMEBREW_OPT/ruby/lib:${LIBRARY_PATH:-}"
export LIBRARY_PATH="$HOMEBREW_OPT/jpeg/lib:${LIBRARY_PATH:-}"
export LIBRARY_PATH="$HOMEBREW_OPT/zlib/lib:${LIBRARY_PATH:-}"
export LIBRARY_PATH="$HOMEBREW_OPT/icu4c/lib:${LIBRARY_PATH:-}"
export LIBRARY_PATH="$HOMEBREW_OPT/bison/lib:${LIBRARY_PATH:-}"
export LIBRARY_PATH="$HOMEBREW_OPT/libedit/lib:${LIBRARY_PATH:-}"
export LIBRARY_PATH="$HOMEBREW_OPT/ncurses/lib:${LIBRARY_PATH:-}"
export LIBRARY_PATH="$HOMEBREW_OPT/openssl/lib:${LIBRARY_PATH:-}"
export LIBRARY_PATH="$HOMEBREW_OPT/binutils/lib:${LIBRARY_PATH:-}"
export LIBRARY_PATH="$HOMEBREW_OPT/libiconv/lib:${LIBRARY_PATH:-}"
export LIBRARY_PATH="$HOMEBREW_OPT/libxml12/lib:${LIBRARY_PATH:-}"
export LIBRARY_PATH="$HOMEBREW_OPT/readline/lib:${LIBRARY_PATH:-}"
export LIBRARY_PATH="$HOMEBREW_OPT/openldap/lib:${LIBRARY_PATH:-}"
export LIBRARY_PATH="$HOMEBREW_PREFIX/lib:${LIBRARY_PATH:-}"

export LD_LIBRARY_PATH="$HOMEBREW_OPT/curl/lib:${LD_LIBRARY_PATH:-}"
export LD_LIBRARY_PATH="$HOMEBREW_OPT/krb5/lib:${LD_LIBRARY_PATH:-}"
export LD_LIBRARY_PATH="$HOMEBREW_OPT/ruby/lib:${LD_LIBRARY_PATH:-}"
export LD_LIBRARY_PATH="$HOMEBREW_OPT/jpeg/lib:${LD_LIBRARY_PATH:-}"
export LD_LIBRARY_PATH="$HOMEBREW_OPT/zlib/lib:${LD_LIBRARY_PATH:-}"
export LD_LIBRARY_PATH="$HOMEBREW_OPT/icu4c/lib:${LD_LIBRARY_PATH:-}"
export LD_LIBRARY_PATH="$HOMEBREW_OPT/bison/lib:${LD_LIBRARY_PATH:-}"
export LD_LIBRARY_PATH="$HOMEBREW_OPT/libedit/lib:${LD_LIBRARY_PATH:-}"
export LD_LIBRARY_PATH="$HOMEBREW_OPT/ncurses/lib:${LD_LIBRARY_PATH:-}"
export LD_LIBRARY_PATH="$HOMEBREW_OPT/openssl/lib:${LD_LIBRARY_PATH:-}"
export LD_LIBRARY_PATH="$HOMEBREW_OPT/binutils/lib:${LD_LIBRARY_PATH:-}"
export LD_LIBRARY_PATH="$HOMEBREW_OPT/libiconv/lib:${LD_LIBRARY_PATH:-}"
export LD_LIBRARY_PATH="$HOMEBREW_OPT/libxml12/lib:${LD_LIBRARY_PATH:-}"
export LD_LIBRARY_PATH="$HOMEBREW_OPT/readline/lib:${LD_LIBRARY_PATH:-}"
export LD_LIBRARY_PATH="$HOMEBREW_OPT/openldap/lib:${LD_LIBRARY_PATH:-}"
export LD_LIBRARY_PATH="$HOMEBREW_PREFIX/lib:${LD_LIBRARY_PATH:-}"

export C_INCLUDE_PATH="$HOMEBREW_OPT/curl/include:${C_INCLUDE_PATH:-}"
export C_INCLUDE_PATH="$HOMEBREW_OPT/krb5/include:${C_INCLUDE_PATH:-}"
export C_INCLUDE_PATH="$HOMEBREW_OPT/ruby/include:${C_INCLUDE_PATH:-}"
export C_INCLUDE_PATH="$HOMEBREW_OPT/jpeg/include:${C_INCLUDE_PATH:-}"
export C_INCLUDE_PATH="$HOMEBREW_OPT/zlib/include:${C_INCLUDE_PATH:-}"
export C_INCLUDE_PATH="$HOMEBREW_OPT/icu4c/include:${C_INCLUDE_PATH:-}"
export C_INCLUDE_PATH="$HOMEBREW_OPT/libedit/include:${C_INCLUDE_PATH:-}"
export C_INCLUDE_PATH="$HOMEBREW_OPT/ncurses/include:${C_INCLUDE_PATH:-}"
export C_INCLUDE_PATH="$HOMEBREW_OPT/openssl/include:${C_INCLUDE_PATH:-}"
export C_INCLUDE_PATH="$HOMEBREW_OPT/binutils/include:${C_INCLUDE_PATH:-}"
export C_INCLUDE_PATH="$HOMEBREW_OPT/libiconv/include:${C_INCLUDE_PATH:-}"
export C_INCLUDE_PATH="$HOMEBREW_OPT/libxml12/include:${C_INCLUDE_PATH:-}"
export C_INCLUDE_PATH="$HOMEBREW_OPT/readline/include:${C_INCLUDE_PATH:-}"
export C_INCLUDE_PATH="$HOMEBREW_OPT/openldap/include:${C_INCLUDE_PATH:-}"
export C_INCLUDE_PATH="$HOMEBREW_PREFIX/include:${C_INCLUDE_PATH:-}"

export PKG_CONFIG_PATH="$HOMEBREW_OPT/curl/lib/pkgconfig:${PKG_CONFIG_PATH:-}"
export PKG_CONFIG_PATH="$HOMEBREW_OPT/krb5/lib/pkgconfig:${PKG_CONFIG_PATH:-}"
export PKG_CONFIG_PATH="$HOMEBREW_OPT/ruby/lib/pkgconfig:${PKG_CONFIG_PATH:-}"
export PKG_CONFIG_PATH="$HOMEBREW_OPT/jpeg/lib/pkgconfig:${PKG_CONFIG_PATH:-}"
export PKG_CONFIG_PATH="$HOMEBREW_OPT/zlib/lib/pkgconfig:${PKG_CONFIG_PATH:-}"
export PKG_CONFIG_PATH="$HOMEBREW_OPT/icu4c/lib/pkgconfig:${PKG_CONFIG_PATH:-}"
export PKG_CONFIG_PATH="$HOMEBREW_OPT/ncurses/lib/pkgconfig:${PKG_CONFIG_PATH:-}"
export PKG_CONFIG_PATH="$HOMEBREW_OPT/openssl/lib/pkgconfig:${PKG_CONFIG_PATH:-}"
export PKG_CONFIG_PATH="$HOMEBREW_OPT/libedit/lib/pkgconfig:${PKG_CONFIG_PATH:-}"
export PKG_CONFIG_PATH="$HOMEBREW_OPT/libxml12/lib/pkgconfig:${PKG_CONFIG_PATH:-}"
export PKG_CONFIG_PATH="$HOMEBREW_OPT/readline/lib/pkgconfig:${PKG_CONFIG_PATH:-}"
export PKG_CONFIG_PATH="$HOMEBREW_OPT/openldap/lib/pkgconfig:${PKG_CONFIG_PATH:-}"
export PKG_CONFIG_PATH="$HOMEBREW_PREFIX/lib/pkgconfig/:${PKG_CONFIG_PATH:-}"

# export LDFLAGS="$HOMEBREW_PREFIX/lib $LDFLAGS"
# export CFLAGS="$HOMEBREW_PREFIX/include $CFLAGS"
# export CPPFLAGS="$HOMEBREW_PREFIX/include $CPPFLAGS"

export MANPATH="$HOMEBREW_PREFIX/share/man:${MANPATH:-}"
export INFOPATH="$HOMEBREW_PREFIX/share/info:${INFOPATH:-}"

export GUILE_LOAD_PATH="$HOMEBREW_PREFIX/share/guile/site/3.0"
export GUILE_LOAD_COMPILED_PATH="$HOMEBREW_PREFIX/lib/guile/3.0/site-ccache"
export GUILE_SYSTEM_EXTENSIONS_PATH="$HOMEBREW_PREFIX/lib/guile/3.0/extensions"

# Completions
fpath+=("$HOMEBREW_PREFIX/share/zsh/site-functions")

# Performance optimizations
export HOMEBREW_MAKE_JOBS="${MACHINE_CORES:-4}"
export HOMEBREW_DISPLAY_INSTALL_TIMES=1
export HOMEBREW_COLOR=1

# Security and download optimizations
export HOMEBREW_NO_INSECURE_REDIRECT=1
export HOMEBREW_CURL_RETRIES=3

# Privacy
export HOMEBREW_NO_ANALYTICS=1

# Set default editor for Homebrew commands
export HOMEBREW_EDITOR="nvim"

# Always use Homebrew installed apps if available
export HOMEBREW_FORCE_BREWED_CURL=1
export HOMEBREW_FORCE_BREWED_CA_CERTIFICATES=1

# -------------------------------------------------------------------------------------------------
# -*- mode: bash; sh-indentation: 2; indent-tabs-mode: nil; sh-basic-offset: 2; -*-
# vim: ft=bash sw=2 ts=2 et
# -------------------------------------------------------------------------------------------------
