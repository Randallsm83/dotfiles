{{- /*
Template: detect-package-manager
Description: Returns the appropriate package manager for the current platform
Returns: "scoop" | "winget" | "homebrew" | "mise" | "apt" | "dnf" | "pacman"

Usage in templates:
  {{ template "detect-package-manager" . }}
*/ -}}

{{- if eq .chezmoi.os "windows" -}}
  {{- /* Windows: prefer scoop for CLI tools, winget for GUI apps */ -}}
  scoop
{{- else if eq .chezmoi.os "darwin" -}}
  {{- /* macOS: use homebrew, but mise is preferred for CLI tools */ -}}
  homebrew
{{- else -}}
  {{- /* Linux: prefer mise (installs via cargo), fallback to system package manager */ -}}
  {{- if eq .chezmoi.osRelease.id "ubuntu" -}}
    apt
  {{- else if eq .chezmoi.osRelease.id "debian" -}}
    apt
  {{- else if eq .chezmoi.osRelease.id "fedora" -}}
    dnf
  {{- else if eq .chezmoi.osRelease.id "arch" -}}
    pacman
  {{- else -}}
    mise
  {{- end -}}
{{- end -}}
